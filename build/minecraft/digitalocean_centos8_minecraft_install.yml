---
- hosts: digitalocean
  gather_facts: yes
  #become: yes
  vars:
    user_name: centos

  tasks:
    - name: minecraft用ディレクトリの作成
      file: path=/home/{{ user_name }}/minecraft state=directory owner={{ user_name }} group={{ user_name }} mode=0755
      tags: mkdir

    - name: binディレクトリの作成
      file: path=/home/{{ user_name }}/minecraft/bin state=directory owner={{ user_name }} group={{ user_name }} mode=0755
      tags: mkdir

    - name: 起動スクリプトのダウンロード
      get_url: url="http://minecraft.gamepedia.com/Tutorials/Server_startup_script/Script?action=raw" dest=/home/{{ user_name }}/minecraft/bin/minecraft mode=0775
      tags: startup_script

    - name: 起動スクリプトの編集
      lineinfile: dest=/home/{{ user_name }}/minecraft/bin/minecraft state=present backrefs=yes regexp='^\s*MCPATH=' line=" MCPATH='/home/{{ user_name }}/minecraft'"
      tags: edit_startup_script
